(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{AFIk:function(e,t,a){"use strict";var l=a("0ZgE"),r=a("VY4n");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("NG6T");var n=l(a("uZXS"));a("UsS6");var d=l(a("xqAZ"));a("sL9k");var u=l(a("BlmP"));a("xzRB");var o=l(a("TOEs"));a("3PXm");var f=l(a("m2aW"));a("hjcW");var i=l(a("Tmqy")),s=l(a("U2oY")),c=l(a("TFzq")),m=l(a("DEU0")),p=l(a("+hkI")),h=l(a("54rf")),E=l(a("oHNe"));a("YJ5n");var v=l(a("Vb+q"));a("6ASg");var b=l(a("pKc7"));a("0lkx");var g=l(a("gEKc"));a("8kBs");var S=l(a("aCut"));a("M50D");var x=l(a("5Zb7"));a("4Ox4");var y,k,D,F=l(a("83Te")),w=r(a("PQfD")),N=a("rAnT"),M=l(a("I9Uw")),Y=l(a("zYb/")),T=l(a("fLGu")),R=l(a("CkN6")),I=l(a("zHco")),O=l(a("aGtn")),C=F.default.RangePicker,z=x.default.Item,L=(S.default.Step,g.default.TextArea,b.default.Option),P=(v.default.Group,function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")}),A={1:"\u8ba2\u5355\u65b0\u5efa",2:"\u8ba2\u5355\u5df2\u8d85\u65f6",3:"\u8ba2\u5355\u5df2\u53d6\u6d88",4:"\u8ba2\u5355\u51fa\u7968\u4e2d",5:"\u8ba2\u5355\u6210\u529f",6:"\u8ba2\u5355\u5931\u8d25",7:"\u8ba2\u5355\u5df2\u9000\u7968",8:"\u8ba2\u5355\u5f02\u5e38"},V=(y=(0,N.connect)(function(e){var t=e.busOrder,a=e.loading;return{order:t,loading:a.effects["busOrder/fetch"]}}),k=x.default.create(),y(D=k(D=function(e){function t(){var e,a;(0,c.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,p.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(r))),a.state={isShowRefundModal:!1,selectedRows:[],formValues:{},expandForm:!1,pageSize:10},a.columns=[{title:"\u8ba2\u5355\u53f7",dataIndex:"orderNo"},{title:"\u4e0b\u5355\u65f6\u95f4",dataIndex:"createDate",render:function(e){return w.default.createElement("span",null,(0,M.default)(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u884c\u7a0b",dataIndex:"line",render:function(e,t){return w.default.createElement("span",null,t.startStationName+"-"+t.endStationName)}},{title:"\u51fa\u53d1\u65f6\u95f4",dataIndex:"goTime",render:function(e,t){return w.default.createElement("span",null,t.startDate+" "+t.startTime)}},{title:"\u8f66\u6b21\u53f7",dataIndex:"busLineNo"},{title:"\u9884\u5b9a\u624b\u673a",dataIndex:"mobilePhone"},{title:"\u7968\u5f20\u6570",dataIndex:"ticketNum"},{title:"\u7968\u4ef7",dataIndex:"ticketPrice"},{title:"\u8ba2\u5355\u603b\u989d",dataIndex:"totalMoney"},{title:"\u8ba2\u5355\u72b6\u6001",dataIndex:"orderStatus",render:function(e){return w.default.createElement("span",null,A[e])}},{title:"\u64cd\u4f5c",dataIndex:"operate",width:140,fixed:"right",render:function(e,t,l){return w.default.createElement(w.Fragment,null,w.default.createElement("a",{className:"f-mr10",onClick:function(){return a.setRefundModal(!0)}},"\u9000\u7968"),w.default.createElement(Y.default,{to:"/bus/order/detail?orderNo=".concat(t.orderNo)},"\u8ba2\u5355\u8be6\u60c5"))}}],a.fetchData=function(e){var t=a.props.dispatch;t({type:"busOrder/fetch",payload:(0,s.default)({pageSize:a.state.pageSize},e)})},a.onTableChange=function(e,t,l){var r=a.state.formValues,n=Object.keys(t).reduce(function(e,a){var l=(0,s.default)({},e);return l[a]=P(t[a]),l},{}),d=(0,s.default)({pageNum:e.current,pageSize:e.pageSize},r,n);a.setState({pageSize:e.pageSize}),l.field&&(d.sorter="".concat(l.field,"_").concat(l.order)),a.fetchData(d)},a.onFormReset=function(){var e=a.props,t=e.form;e.dispatch;t.resetFields(),a.setState({formValues:{}}),a.fetchData({pageNum:1})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onExportExcel=function(){var e=a.props.order.list,t=[];e.forEach(function(e){var l={};a.columns.forEach(function(t){e[t.dataIndex]&&(l[t.title]=e[t.dataIndex])}),t.push(l)}),(0,T.default)(t,"\u8ba2\u5355\u6570\u636e")},a.onSearch=function(e){e.preventDefault();var t=a.props,l=(t.dispatch,t.form);l.validateFields(function(e,t){if(console.log(t),!e){var l={};t.orderTime&&(l.beginDate=t.orderTime[0].format("YYYY-MM-DD"),l.endDate=t.orderTime[1].format("YYYY-MM-DD"));var r={};t.startTime&&(r.departureDate=t.startTime[0].format("YYYY-MM-DD"),r.arriveDate=t.startTime[1].format("YYYY-MM-DD"));var n=(0,s.default)({},t);a.setState({formValues:n}),a.fetchData((0,s.default)({pageNum:1},n,l,r))}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.setRefundModal=function(e){a.setState({isShowRefundModal:e})},a.onRefundModalOk=function(e){a.setRefundModal(!1)},a}return(0,E.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.fetchData({pageNum:1})}},{key:"renderSelectStatus",value:function(){var e=[];for(var t in A)e.push(w.default.createElement(L,{value:t,key:t},A[t]));return w.default.createElement(b.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},e)}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return w.default.createElement(x.default,{onSubmit:this.onSearch,layout:"inline"},w.default.createElement(u.default,{gutter:{md:8,xl:16,xxl:24}},w.default.createElement(i.default,{span:6},w.default.createElement(z,{label:"\u8ba2\u5355\u72b6\u6001"},e("orderStatus")(this.renderSelectStatus()))),w.default.createElement(i.default,{span:6},w.default.createElement(z,{label:"\u8ba2\u5355\u53f7"},e("orderNo")(w.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7"})))),w.default.createElement(i.default,{span:6},w.default.createElement(z,{label:"\u624b\u673a\u53f7"},e("mobilePhone")(w.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"})))),w.default.createElement(i.default,{span:6},w.default.createElement("div",{style:{marginBottom:24}},w.default.createElement(f.default,{type:"primary",htmlType:"submit",className:"f-mr10"},"\u67e5\u8be2"),w.default.createElement(f.default,{type:"primary",className:"f-mr10",onClick:this.onFormReset},"\u91cd\u7f6e"),w.default.createElement("a",{onClick:this.toggleForm}," \u5c55\u5f00 ",w.default.createElement(o.default,{type:"down"})," ")))))}},{key:"renderAdvancedForm",value:function(){var e=this.props.form.getFieldDecorator;return w.default.createElement(x.default,{onSubmit:this.onSearch,layout:"inline"},w.default.createElement(u.default,{gutter:{md:8,xl:16,xxl:24}},w.default.createElement(i.default,{span:6},w.default.createElement(z,{label:"\u8ba2\u5355\u72b6\u6001"},e("orderStatus")(this.renderSelectStatus()))),w.default.createElement(i.default,{span:6},w.default.createElement(z,{label:"\u8ba2\u5355\u53f7"},e("orderNo")(w.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7"})))),w.default.createElement(i.default,{span:6},w.default.createElement(z,{label:"\u624b\u673a\u53f7"},e("mobilePhone")(w.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"})))),w.default.createElement(i.default,{span:6},w.default.createElement(z,{label:"\u8eab\u4efd\u8bc1"},e("certificateNo")(w.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u53d6\u7968\u4eba\u8eab\u4efd\u8bc1"}))))),w.default.createElement(u.default,{gutter:{md:8,xl:16,xxl:24}},w.default.createElement(i.default,{span:8},w.default.createElement(z,{label:"\u4e0b\u5355\u65f6\u95f4"},e("orderTime")(w.default.createElement(C,{style:{width:"100%"}})))),w.default.createElement(i.default,{span:8},w.default.createElement(z,{label:"\u53d1\u8f66\u65f6\u95f4"},e("startTime")(w.default.createElement(C,{style:{width:"100%"}})))),w.default.createElement(i.default,{span:8},w.default.createElement("div",{style:{marginBottom:24}},w.default.createElement(f.default,{type:"primary",htmlType:"submit",className:"f-mr10"},"\u67e5\u8be2"),w.default.createElement(f.default,{type:"primary",className:"f-mr10",onClick:this.onFormReset},"\u91cd\u7f6e"),w.default.createElement(f.default,{type:"primary",className:"f-mr10",onClick:this.onExportExcel},"\u5bfc\u51fa"),w.default.createElement("a",{onClick:this.toggleForm}," \u6536\u8d77 ",w.default.createElement(o.default,{type:"up"}))))))}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderAdvancedForm():this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.order,l=t.loading,r={list:a.list,pagination:{total:a.total,showTotal:function(e){return"\u5171"+e+"\u6761\u6570\u636e"}}},u=this.state.selectedRows;return w.default.createElement(I.default,null,w.default.createElement(d.default,{bordered:!1},w.default.createElement("div",{className:O.default.tableList},w.default.createElement("div",{className:O.default.tableListForm},this.renderForm()),w.default.createElement(R.default,{bordered:!0,selectedRows:u,loading:l,data:r,columns:this.columns,rowKey:"id",onSelectRow:this.handleSelectRows,onChange:this.onTableChange,scroll:{x:1400}}))),w.default.createElement(n.default,{title:"\u9000\u7968",visible:this.state.isShowRefundModal,onOk:this.onRefundModalOk,onCancel:function(){return e.setRefundModal(!1)}},w.default.createElement("p",null,"\u786e\u5b9a\u8981\u9000\u7968\u5417")))}}]),t}(w.PureComponent))||D)||D);t.default=V},aGtn:function(e,t,a){e.exports={tableList:"antd-pro\\pages\\-bus\\-order-tableList",tableListOperator:"antd-pro\\pages\\-bus\\-order-tableListOperator",tableListForm:"antd-pro\\pages\\-bus\\-order-tableListForm",submitButtons:"antd-pro\\pages\\-bus\\-order-submitButtons"}}}]);