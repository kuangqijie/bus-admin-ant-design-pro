(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{KkFE:function(e,t,a){e.exports={tableList:"antd-pro\\pages\\-city\\-order-tableList",tableListOperator:"antd-pro\\pages\\-city\\-order-tableListOperator",tableListForm:"antd-pro\\pages\\-city\\-order-tableListForm",submitButtons:"antd-pro\\pages\\-city\\-order-submitButtons"}},iW9F:function(e,t,a){"use strict";var l=a("0ZgE"),n=a("VY4n");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("NG6T");var r=l(a("uZXS"));a("UsS6");var d=l(a("xqAZ"));a("sL9k");var u=l(a("BlmP"));a("xzRB");var o=l(a("TOEs"));a("3PXm");var f=l(a("m2aW"));a("hjcW");var c=l(a("Tmqy")),i=l(a("U2oY")),s=l(a("TFzq")),m=l(a("DEU0")),p=l(a("+hkI")),E=l(a("54rf")),h=l(a("oHNe"));a("YJ5n");var v=l(a("Vb+q"));a("6ASg");var y=l(a("pKc7"));a("0lkx");var g=l(a("gEKc"));a("8kBs");var b=l(a("aCut"));a("M50D");var x=l(a("5Zb7"));a("4Ox4");var k,w,S,F=l(a("83Te")),R=n(a("PQfD")),I=a("rAnT"),M=l(a("I9Uw")),L=l(a("zYb/")),D=l(a("fLGu")),T=l(a("CkN6")),N=l(a("zHco")),C=l(a("KkFE")),O=F.default.RangePicker,A=x.default.Item,P=(b.default.Step,g.default.TextArea,y.default.Option),V=(v.default.Group,function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")}),Y={1:"\u8ba2\u5355\u65b0\u5efa",2:"\u8ba2\u5355\u5df2\u8d85\u65f6",3:"\u8ba2\u5355\u5df2\u53d6\u6d88",4:"\u8ba2\u5355\u51fa\u7968\u4e2d",5:"\u8ba2\u5355\u6210\u529f",6:"\u8ba2\u5355\u5931\u8d25",7:"\u8ba2\u5355\u5df2\u9000\u7968",8:"\u8ba2\u5355\u5f02\u5e38"},B=(k=(0,I.connect)(function(e){var t=e.order,a=e.loading;return{order:t,loading:a.effects["order/fetch"]}}),w=x.default.create(),k(S=w(S=function(e){function t(){var e,a;(0,s.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,p.default)(this,(e=(0,E.default)(t)).call.apply(e,[this].concat(n))),a.state={isShowRefundModal:!1,selectedRows:[],formValues:{},expandForm:!1},a.columns=[{title:"\u8ba2\u5355\u53f7",dataIndex:"orderNo"},{title:"\u4e0b\u5355\u65f6\u95f4",dataIndex:"createDate",render:function(e){return R.default.createElement("span",null,(0,M.default)(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u884c\u7a0b",dataIndex:"line",render:function(e,t){return R.default.createElement("span",null,t.startStationName+"-"+t.endStationName)}},{title:"\u51fa\u53d1\u65f6\u95f4",dataIndex:"goTime",render:function(e,t){return R.default.createElement("span",null,t.startDate+" "+t.startTime)}},{title:"\u8f66\u6b21\u53f7",dataIndex:"busLineNo"},{title:"\u9884\u5b9a\u624b\u673a",dataIndex:"mobilePhone"},{title:"\u7968\u5f20\u6570",dataIndex:"ticketNum"},{title:"\u7968\u4ef7",dataIndex:"ticketPrice"},{title:"\u8ba2\u5355\u603b\u989d",dataIndex:"totalMoney"},{title:"\u8ba2\u5355\u72b6\u6001",dataIndex:"orderStatus",render:function(e){return R.default.createElement("span",null,Y[e])}},{title:"\u64cd\u4f5c",dataIndex:"operate",width:140,fixed:"right",render:function(e,t,l){return R.default.createElement(R.Fragment,null,R.default.createElement("a",{className:"f-mr10",onClick:function(){return a.setRefundModal(!0)}},"\u9000\u7968"),R.default.createElement(L.default,{to:"/city/order/detail/1"},"\u8ba2\u5355\u8be6\u60c5"))}}],a.fetchData=function(e){var t=a.props.dispatch;t({type:"order/fetch",payload:(0,i.default)({token:"@lkjkadf@456"},e,{pageSize:10})})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.onTableChange=function(e,t,l){a.props.dispatch;var n=a.state.formValues,r=Object.keys(t).reduce(function(e,a){var l=(0,i.default)({},e);return l[a]=V(t[a]),l},{}),d=(0,i.default)({pageNum:e.current},n,r);l.field&&(d.sorter="".concat(l.field,"_").concat(l.order)),a.fetchData(d)},a.handleFormReset=function(){var e=a.props,t=e.form,l=e.dispatch;t.resetFields(),a.setState({formValues:{}}),l({type:"rule/fetch",payload:{}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onExportExcel=function(){var e=a.props.order.list,t=[];e.forEach(function(e){var l={};a.columns.forEach(function(t){e[t.dataIndex]&&(l[t.title]=e[t.dataIndex])}),t.push(l)}),(0,D.default)(t,"\u8ba2\u5355\u6570\u636e")},a.onSearch=function(e){e.preventDefault();var t=a.props,l=t.dispatch,n=t.form;n.validateFields(function(e,t){if(console.log(t),!e){var n=(0,i.default)({},t,{updatedAt:t.updatedAt&&t.updatedAt.valueOf()});a.setState({formValues:n}),l({type:"order/fetch",payload:n})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.setRefundModal=function(e){a.setState({isShowRefundModal:e})},a.onRefundModalOk=function(e){a.setRefundModal(!1)},a}return(0,h.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.fetchData({pageNum:1})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return R.default.createElement(x.default,{onSubmit:this.onSearch,layout:"inline"},R.default.createElement(u.default,{gutter:{md:8,xl:16,xxl:24}},R.default.createElement(c.default,{span:5},R.default.createElement(A,{label:"\u8ba2\u5355\u72b6\u6001"},e("status")(R.default.createElement(y.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},R.default.createElement(P,{value:"1"},"\u5df2\u652f\u4ed8"),R.default.createElement(P,{value:"2"},"\u5df2\u5173\u95ed"),R.default.createElement(P,{value:"3"},"\u5168\u90e8\u9000\u7968"))))),R.default.createElement(c.default,{span:6},R.default.createElement(A,{label:"\u5173\u952e\u5b57"},e("name")(R.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u6216\u8eab\u4efd\u8bc1\u53f7"})))),R.default.createElement(c.default,{span:7},R.default.createElement(A,{label:"\u4e0b\u5355\u65e5\u671f"},e("date")(R.default.createElement(O,{style:{width:"100%"}})))),R.default.createElement(c.default,{span:6},R.default.createElement("div",{style:{marginBottom:24}},R.default.createElement(f.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),R.default.createElement(f.default,{type:"primary",style:{marginLeft:8},onClick:this.onExportExcel},"\u5bfc\u51fa"),R.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u5c55\u5f00 ",R.default.createElement(o.default,{type:"down"}))))))}},{key:"renderAdvancedForm",value:function(){var e=this.props.form.getFieldDecorator;return R.default.createElement(x.default,{onSubmit:this.onSearch,layout:"inline"},R.default.createElement(u.default,{gutter:{md:8,xl:16,xxl:24}},R.default.createElement(c.default,{span:5},R.default.createElement(A,{label:"\u8ba2\u5355\u72b6\u6001"},e("status")(R.default.createElement(y.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},R.default.createElement(P,{value:"1"},"\u5df2\u652f\u4ed8"),R.default.createElement(P,{value:"2"},"\u5df2\u5173\u95ed"),R.default.createElement(P,{value:"3"},"\u5168\u90e8\u9000\u7968"))))),R.default.createElement(c.default,{span:6},R.default.createElement(A,{label:"\u5173\u952e\u5b57"},e("name")(R.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u6216\u8eab\u4efd\u8bc1\u53f7"})))),R.default.createElement(c.default,{span:7},R.default.createElement(A,{label:"\u4e0b\u5355\u65e5\u671f"},e("date")(R.default.createElement(O,{style:{width:"100%"}})))),R.default.createElement(c.default,{span:6},R.default.createElement(A,{label:"\u8ba2\u5355\u72b6\u6001"},e("status")(R.default.createElement(y.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},R.default.createElement(P,{value:"1"},"\u5df2\u652f\u4ed8"),R.default.createElement(P,{value:"2"},"\u5df2\u5173\u95ed"),R.default.createElement(P,{value:"3"},"\u5168\u90e8\u9000\u7968")))))),R.default.createElement(u.default,{gutter:{md:8,xl:16,xxl:24}},R.default.createElement(c.default,{span:5},R.default.createElement(A,{label:"\u8ba2\u5355\u72b6\u6001"},e("status")(R.default.createElement(y.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},R.default.createElement(P,{value:"1"},"\u5df2\u652f\u4ed8"),R.default.createElement(P,{value:"2"},"\u5df2\u5173\u95ed"),R.default.createElement(P,{value:"3"},"\u5168\u90e8\u9000\u7968"))))),R.default.createElement(c.default,{span:6},R.default.createElement(A,{label:"\u5173\u952e\u5b57"},e("name")(R.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u6216\u8eab\u4efd\u8bc1\u53f7"})))),R.default.createElement(c.default,{span:7},R.default.createElement(A,{label:"\u4e0b\u5355\u65e5\u671f"},e("date")(R.default.createElement(O,{style:{width:"100%"}})))),R.default.createElement(c.default,{span:6},R.default.createElement("div",{style:{marginBottom:24}},R.default.createElement(f.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),R.default.createElement(f.default,{type:"primary",style:{marginLeft:8},onClick:this.onExportExcel},"\u5bfc\u51fa"),R.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u6536\u8d77 ",R.default.createElement(o.default,{type:"up"}))))))}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderAdvancedForm():this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.order,l=t.loading;console.log(a);var n={list:a.list,pagination:{total:a.total,showTotal:function(e){return"\u5171"+e+"\u6761\u6570\u636e"}}},u=this.state.selectedRows;return R.default.createElement(N.default,null,R.default.createElement(d.default,{bordered:!1},R.default.createElement("div",{className:C.default.tableList},R.default.createElement("div",{className:C.default.tableListForm},this.renderForm()),R.default.createElement(T.default,{bordered:!0,selectedRows:u,loading:l,data:n,columns:this.columns,rowKey:"id",onSelectRow:this.handleSelectRows,onChange:this.onTableChange,scroll:{x:1400}}))),R.default.createElement(r.default,{title:"\u9000\u7968",visible:this.state.isShowRefundModal,onOk:this.onRefundModalOk,onCancel:function(){return e.setRefundModal(!1)}},R.default.createElement("p",null,"\u786e\u5b9a\u8981\u9000\u7968\u5417")))}}]),t}(R.PureComponent))||S)||S);t.default=B}}]);